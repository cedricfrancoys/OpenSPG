{% extends '::base.html.twig' %}

{% block title %}{% trans from "management" %}Management{% endtrans %}{% endblock %}

{% block pageTitleText %}{% trans from "management" %}Management{% endtrans %}{% endblock %}

{% block body %}

	{{ parent() }}

    <div class="container">
		<div class="row">
			<div class="col-sm-3 col-md-2 sidebar">
				<ul class="nav nav-sidebar">
					<li class="active"><a href="{{ path('management_default_index') }}">{% trans from "management" %}Dashboard{% endtrans %}</a></li>
					<li><a href="{{ path('management_producer_index') }}">{% trans from "management" %}Producers{% endtrans %}</a></li>
					<li><a href="{{ path('management_consumer_index') }}">{% trans from "management" %}Consumers{% endtrans %}</a></li>
					<li><a href="{{ path('management_manager_index') }}">{% trans from "management" %}Manager{% endtrans %}</a></li>
					<li><a href="{{ path('management_visitgroup_index') }}">{% trans from "management" %}Visit Group{% endtrans %}</a></li>
					<li><a href="{{ path('management_guest_index') }}">{% trans from "management" %}Guests{% endtrans %}</a></li>
					<li><a href="{{ path('management_user_index') }}">{% trans from "management" %}Users{% endtrans %}</a></li>
				</ul>
				<ul class="nav nav-sidebar">
					<li><a href="{{ path('management_news_index') }}">{% trans from "management" %}News{% endtrans %}</a></li>
					<li><a href="{{ path('management_property_index') }}">{% trans from "management" %}Properties{% endtrans %}</a></li>
					<li><a href="{{ path('management_stock_index') }}">{% trans from "management" %}Products/Stock{% endtrans %}</a></li>
					<li><a href="{{ path('management_visit_index') }}">{% trans from "management" %}Visits{% endtrans %}</a></li>
					<li><a href="{{ path('management_fee_index') }}">{% trans from "management" %}Fees{% endtrans %}</a></li>
					<li><a href="{{ path('management_node_edit') }}">{% trans from "management" %}Node{% endtrans %}</a></li>
					<li><a href="{{ path('management_page_index') }}">{% trans from "management" %}Pages{% endtrans %}</a></li>
				</ul>
			</div>
			<div class="col-sm-9 col-sm-offset-2 col-md-10 col-md-offset-0 main">
				<h1 class="page-header">{% trans from "management" %}Dashboard{% endtrans %}</h1>

				<h2>{% trans from "management" %}Latest user registrations{% endtrans %}</h2>
				<div class="table-responsive">
					<table class="table table-striped">
              			<thead>
                			<tr>
                  				<th>#</th>
                  				<th>{% trans from "user" %}Username{% endtrans %}</th>
                  				<th>{% trans from "user" %}Email{% endtrans %}</th>
                  				<th>{% trans from "user" %}Registration date{% endtrans %}</th>
                  				<th>{% trans from "user" %}Last login{% endtrans %}</th>
                			</tr>
              			</thead>
              			<tbody>
                			{% for user in users %}
                				<tr>
		                  			<td>{{ user.id }}</td>
		                  			<td><a href="{{ path('management_user_edit',{"id":user.id}) }}">{{ user.username }}</a></td>
		                  			<td><a href="mailto:{{ user.email }}">{{ user.email }}</a></td>
		                  			<td>{% if user.registered is null %}--{% else %}{{ user.registered|date('d-m-y H:i') }}{% endif %}</td>
		                  			<td>{% if user.lastLogin is null %}--{% else %}{{ user.lastLogin|date('d-m-y H:i') }}{% endif %}</td>
				                </tr>
                			{% endfor %}
              			</tbody>
            		</table>
				</div>

				<h2>{% trans from "management" %}Latest visits{% endtrans %}</h2>
				<div class="table-responsive">
					<table class="table table-striped">
              			<thead>
                			<tr>
                  				<th>#</th>
                  				<th>{% trans from "visit" %}Visit date{% endtrans %}</th>
                  				<th>{% trans from "visit" %}Property{% endtrans %}</th>
                  				<th>{% trans from "visit" %}Producer{% endtrans %}</th>
                  				<th>{% trans from "visit" %}Status{% endtrans %}</th>
                			</tr>
              			</thead>
              			<tbody>
                			{% for visit in visits %}
                				<tr>
		                  			<td>{{ visit.id }}</td>
		                  			<td><a href="{{ path('management_visit_edit',{"id":visit.id}) }}">{{ visit.visitDate|date('d-m-Y') }}</a></td>
		                  			<td><a href="{{ path('management_property_edit',{"id":visit.Property.id}) }}">{{ visit.Property }}</a></td>
		                  			<td><a href="{{ path('management_producer_edit',{"id":visit.Producer.id}) }}">{{ visit.Producer }}</a></td>
		                  			<td>{% if visit.accepted %}{% trans from "visit" %}Accepted{% endtrans %}{% else %}{% trans from "visit" %}Rejected{% endtrans %}{% endif %}</td>
				                </tr>
                			{% endfor %}
              			</tbody>
            		</table>
				</div>

				<h2>{% trans from "management" %}Latest properties{% endtrans %}</h2>
			</div>
		</div>
	</div>

{% endblock %}

{% block stylesheets %}
	{{ parent() }}

{% endblock %}	
{% block javascripts %}
	{{ parent() }}
{% endblock %}